create table aircrafts
(aircraft_code char(3) not null,
model text not null,
range integer not null,
check (range > 0),
primary key (aircraft_code)
);

insert into aircrafts (aircraft_code, model, range)
values ('SU9', 'Sukhoi SuperJet-100', 3000);

SELECT *
FROM aircrafts



insert into aircrafts (aircraft_code, model, range)
values ('773', 'Boeing 777-300', 11100),
('763', 'Boeing 767-300', 7900),
('733', 'Boeing 737-300', 4200),
('320', 'Airbus A320-200', 5700),
('321', 'Airbus A321-200', 5600),
('319', 'Airbus A319-100', 6700),
('CN1', 'Cessna 208 Caravan', 1200),
('CN2', 'Bombardier CRJ-200', 2700)


SELECT aircraft_code, model, range
FROM aircrafts
ORDER BY model

/*–≥–¥–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–ª–µ—Ç–æ–≤ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ—Ç
 * 4 –¥–æ 6 —Ç—ã—Å. –∫–º*/
SELECT aircraft_code, model, range
FROM aircrafts
WHERE RANGE >=400 AND RANGE <=6000
ORDER BY model
/*–°—É–ø–µ—Ä–¥–∂–µ—Ç –Ω–µ–º–Ω–æ–≥–æ —É–ª—É—á—à–∏–ª–∏ –∏ –µ–≥–æ —Ö–∞—Ä–∞–∫—Ç–∏—Ä–∏—Å—Ç–∏–∫ –¥–∞–ª—å–Ω–æ—Å—Ç–∏ —Å—Ç–∞–¥–∏ 3500*/

UPDATE aircrafts SET RANGE = 3500
WHERE aircraft_code = 'SU9'

/*–£–¥–∞–ª–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–∞–º–æ–ª–µ—Ç–∞—Ö —Å –¥–∞–ª—å–Ω–æ—Å—Ç—å—é –ø–æ–ª–µ—Ç–∞ –±–æ–ª–µ–µ 10000 –∫–º
 * –∞ —Ç–∞–∫–∂–µ —Å –¥–∞–ª—å–Ω–æ—Å—Ç—å—é –ø–æ–ª–µ—Ç–∞ –º–µ–Ω–µ–µ 3000*/
DELETE 
FROM aircrafts 
WHERE RANGE > 10000 OR RANGE <3000;

SELECT aircraft_code, model, range
FROM aircrafts
ORDER BY model

TRUNCATE TABLE aircrafts;

insert into aircrafts (aircraft_code, model, range)
values ('773', 'Boeing 777-300', 11100),
('763', 'Boeing 767-300', 7900),
('733', 'Boeing 737-300', 4200),
('320', 'Airbus A320-200', 5700),
('321', 'Airbus A321-200', 5600),
('319', 'Airbus A319-100', 6700),
('CN1', 'Cessna 208 Caravan', 1200),
('CN2', 'Bombardier CRJ-200', 2700)

CREATE table seats (
aircraft_code char(3) NOT NULL,
seat_no varchar(4) NOT NULL,
fare_conditions varchar(10) NOT NULL,
CHECK (fare_conditions IN ('Economy', 'Comfort', 'Business')
),
PRIMARY KEY (aircraft_code, seat_no),
FOREIGN KEY (aircraft_code)
REFERENCES aircrafts(aircraft_code) ON DELETE cascade
);


INSERT INTO seats 
VALUES 
('SU9', '1A','Business'), 
('SU9', '1B','Business'),
('SU9', '10A','Economy'),
('SU9', '10B','Economy'),
('SU9', '10F','Economy'),
('SU9', '20F','Economy'),

('773', '1A','Business'), 
('773', '1B','Business'),
('773', '10A','Economy'),
('773', '10B','Economy'),
('773', '10F','Economy'),
('773', '20F','Economy'),

('763', '1A','Business'), 
('763', '1B','Business'),
('763', '10A','Economy'),
('763', '10B','Economy'),
('763', '10F','Economy'),
('763', '20F','Economy'),

('733', '1A','Business'), 
('733', '1B','Business'),
('733', '10A','Economy'),
('733', '10B','Economy'),
('733', '10F','Economy'),
('733', '20F','Economy'),

('320', '1A','Business'), 
('320', '1B','Business'),
('320', '10A','Economy'),
('320', '10B','Economy'),
('320', '10F','Economy'),
('320', '20F','Economy'),

('321', '1A','Business'), 
('321', '1B','Business'),
('321', '10A','Economy'),
('321', '10B','Economy'),
('321', '10F','Economy'),
('321', '20F','Economy'),

('319', '1A','Business'), 
('319', '1B','Business'),
('319', '10A','Economy'),
('319', '10B','Economy'),
('319', '10F','Economy'),
('319', '20F','Economy'),

('CN1', '1A','Business'), 
('CN1', '1B','Business'),
('CN1', '10A','Economy'),
('CN1', '10B','Economy'),
('CN1', '10F','Economy'),
('CN1', '20F','Economy'),

('CN2', '1A','Business'), 
('CN2', '1B','Business'),
('CN2', '10A','Economy'),
('CN2', '10B','Economy'),
('CN2', '10F','Economy'),
('CN2', '20F','Economy');


/*–ò–Ω—Ñ–æ—Ä–º–∞—Ü—è –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –º–µ—Å—Ç –≤ —Å–∞–ª–æ–Ω–∞—Ö*/

SELECT count(*) 
FROM seats WHERE aircraft_code = 'SU9'

SELECT count(*) 
FROM seats WHERE aircraft_code = 'CN1'

SELECT aircraft_code, count(*)
FROM seats 
GROUP BY aircraft_code
ORDER BY count;

/*–ü–æ–¥—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—Ç –≤ —Å–∞–ª–æ–Ω–∞—Ö –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π —Å–∞–º–æ–ª–µ—Ç–æ–≤,
 * –Ω–æ —Ç–µ–ø–µ—Ä—å —Å —É—á–µ—Ç–æ–º –∫–ª–∞—Å—Å–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
 */

SELECT aircraft_code, fare_conditions, count(*)
FROM seats
GROUP BY aircraft_code, fare_conditions
ORDER BY aircraft_code, fare_conditions

/*–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –≤ –°–£–ë–î
 * –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö —ç—Ç–æ –æ–¥–Ω–æ –∏–∑ –±–∞–∑–æ–≤—ã—Ö –ø–æ–Ω—è—Ç–∏–π –ª—é–±–æ–≥–æ —è–∑—ã–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
 * */

/*–ß–∏—Å–ª–æ–≤—ã–µ —Ç–∏–ø—ã –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ü–µ–ª–æ—á–∏—Å–ª–ª–ª–ª–µ–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ –ø—Ä–∏–Ω–∏–º–∞—é—Ç
 * –≤–æ –≤–Ω–∏–º–∞–Ω–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω –¥–æ–ø—É–≤—Å—Ç–∏–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏ –∑–∞—Ç—Ä–∞—Ç—ã –ø–∞–º—è—Ç–∏
 * –ó–∞—á–∞—Å—Ç—É—é integer —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ–ø—Ç–∏–º–∞–ª–ª—å–Ω—ã–º –≤—ã–±–æ—Ä–æ–º —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è 
 * –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–∞ –º–µ–∂–¥—É —ç—Ç–∏–º–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º–∏
 * 
 * nimeric –∏ decimal —è–≤–ª—è—é—Ç—Å—è –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–º–∏ –ø–æ —Å–≤–æ–∏–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º
 * –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞—Ç—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –±–æ–ª—å—à–µ –ø–∞–º—è—Ç–∏ —á–µ–º –≤ —Å–ª—É—á–∞–µ —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª
 * —Ç–∏ –¥–∞–Ω–Ω—ã—Ö —Å—Ç–æ–∏—Ç –≤—ã–±–∏—Ä–∞—Ç—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å—É–º–º –∏ –∫–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è
 * —Å–æ–±–ª—é–¥–∞—Ç—å —Ç–æ—á–Ω–æ—Å—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
 * 
 * –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—è–º–∏ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π —Å–ª—É–∂–∞—Ç —Ç–∏–ø—ã
 * real –∏ double
 * –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ç–∞–∫–∏–º–∏ —Ç–∏–ø–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö —Å–ª–µ–¥—É–µ—Ç –ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ 
 * —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–≤—É—Ö —á–∏—Å–ª–µ–∫ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –∏—Ö —Ä–∞–≤–µ–Ω—Å—Ç–≤–∞ –∏—Ö
 * –∑–Ω–∞—á–µ–Ω–∏–π –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –≤ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º
 * 
 * —Ç–∏–ø serial —É–¥–æ–±–µ–Ω –≤ —Ç–µ—Ö —Å–ª—É—á–∞—è—Ö –∫–æ–≥–¥–∞ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –≤ –∫–∞–∫–æ–π-–ª–∏–±—é–æ
 * —Å—Ç–æ–ª–±–µ—Ü –≤—Å—Ç–∞–≤–∏—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä –∑–Ω–∞—á–µ–Ω–∏—è —Å—É—Ä—Ä–æ–≥–∞—Ç–Ω–æ–≥–æ
 * –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞
 * */

SELECT 0.1::REAL * 10 = 1.0::REAL; --- –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ —Ä–∞–≤–Ω—ã


/*–°–∏–º–≤–æ–ª—å–Ω—ã–µ (—Å—Ç—Ä–æ–∫–æ–≤–µ —Ç–∏–ø—ã)
 * –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç–∏–ø—ã character varying(n) –∏ character(n), –≥–¥–µ
 * n —ç—Ç–æ –ø–∞—Ä–∞–º–µ—Ç—Ä –∫–æ—Ç–æ—Ä—ã–π —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –º–∞–º–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ —Å–∏–º–≤–æ–ª–æ–≤ –≤ —Å—Ç—Ä–æ–∫–µ
 * –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ —Å—Ç–æ–ª–±—Ü–µ —Ç–∞–∫–æ–≥–æ —Ç–∏–∏–ø–∞.
 * –≤ character (char)—Å—Ç—Ä–æ–∫–∞ –¥–æ–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–æ–±–µ–ª–∞–º–∏ –µ—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ –∫–æ—Ä–æ—á–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π 
 * –¥–ª–∏–Ω—ã
 * –¢–∞–∫–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–∏–ø text - –≤–≤–æ–¥—è—Ç—Å—è –±–æ–ª—å—à–∏–µ —Å–∏–º–≤–æ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è 
 * $$ –≤—ã–ø–æ–ª–Ω—è—é—Ç —Ç—É–∂–µ —Ä–æ—å —á—Ç–æ –∏ –∫–∞–≤—ã—á–∫–∏ –∫–æ–≥–¥–∞ –≤ –Ω–∏—Ö –∑–∞–∫–ª–ª—é—á–∞–µ—Ç—Å—è —Ç–µ–∫—Å—Ç–æ–≤–∞—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞
 * –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ $$ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–µ–π —É–∂–µ –Ω–µ –Ω—É–∂–Ω–æ —É–¥–≤–∞–∏–≤–∞—Ç—å –Ω–∏–∫–∞–∫–∏–µ —Å–∏–º–≤–æ–ª—ã,
 * —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ—Å—è –≤ —Å–∞–º–æ–π –∫–æ–Ω—Å—Ç–∞–Ω—Ç–µ.
 */
SELECT $$PGDAY\n17$$

SELECT E'PGDAY\n17'

/*–¢–∏–ø –¥–∞—Ç–∞ –≤—Ä–µ–º—è
 * date –ø—Ä–∏ –≤–≤–æ–¥–µ –∑–Ω–∞—á–µ–Ω–∏–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–∫–ª—é—á–∞—Ç—å –¥–∞—Ç—ã –≤ –æ–¥–∏–Ω–∞—Ä–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏
 * 
 */
SELECT current_timestamp

SELECT '1 year 2 months ago'::INTERVAL; --- –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—Ç—Ä–µ–∑–∫–∞ –≤—Ä–µ–º–µ–Ω–∏
--–º–µ–∂–¥—É –¥–≤—É–º—è –º–æ–º–µ–Ω—Ç–∞–º–∏ –≤—Ä–µ–º–µ–Ω–∏

/*–í—ã—á–∏—Å–ª–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –≤—ã—á–∏—Ç–∞–µ–º –æ–¥–Ω—É –¥–∞—Ç—É –∏–∑ –¥—Ä—É–≥–æ–π*/
SELECT('2016-09-16'::timestamp - '2016-09-01'::timestamp)::interval 

/*–ú–æ–∂–Ω–æ —É—Å–µ–∫–∞—Ç—å –¥–∞—Ç—ã —Å —Ç–æ–π –∏–ª–∏ –∏–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å*/
SELECT(date_trunc('day', current_timestamp))

/*–ú–æ–∂–Ω–æ –∏–∑ –¥–∞—Ç –∏–∑–≤–ª–µ–∫–∞—Ç—å –ø–æ–ª—è*/
SELECT extract('mon' FROM date_trunc('day', current_timestamp))

/*–õ–æ–≥–∏—á–µ—Å–∫–∏–π —Ç–∏–ø boolean –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∏—Å—Ç–∏–Ω–∞ –∏–ª–∏ –ª–æ–∂—å,
 * –∞ —Ç–∞–∫–∂–µ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ–º
 * null*/

CREATE TABLE databases (is_open_source boolean, dbms_name text);
INSERT INTO databases 
values
(TRUE, 'PostgreSQL'),
(FALSE, 'Oracle'),
(TRUE, 'MySQL'),
(FALSE, 'MS SQL Server')

SELECT *
FROM databases 
WHERE NOT is_open_source


/*–ú–∞—Å—Å–∏–≤—ã –º–æ–≥—É—Ç –±—ã—Ç—å –º–Ω–æ–≥–æ–º–µ—Ä–Ω—ã–º–∏ –∏ —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è
 * –ª—é–±–æ–≥–æ –∏–∑ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∞ —Ç–∞–∫–∂–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
 * –ú–∞—Å—Å–∏–≤—ã –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª–∏–Ω—ã
 *
 *
 *–ù–∞–ø—Ä–∏–º–µ—Ä –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –±–¥ –≥—Ä–∞–∏—Ñ–∏–∫ –ø–∏–ª–æ—Ç–æ–≤ 
 *–∞–≤–∏–∫–æ–º–ø–∞–Ω–∏–∏ –∫–æ–≥–¥–∞ –æ–Ω–∏ —Å–æ–≤–µ—Ä—à–∞—é—Ç –ø–æ–ª–µ—Ç—ã, —Å–æ—Ö—Ä–∞–Ω–∏–º –∏–∑ –≤ –ë–î –≤–≤–∏–¥–µ –º–∞—Å—Å–∏–≤–æ–≤
 */
CREATE TABLE pilots 
(
pilot_name text,
schedule integer[] ---—É–∫–∞–∑–∞–Ω–∏–µ –º–∞—Å—Å–∏–≤–∞
);

INSERT INTO pilots
VALUES ('Ivan', '{1,3,5,6,7}'::integer[]),
('Petr', '{1,2,5,7}' ::integer[]),
('Pavel','{2,5}'      ::integer[]),
('Boris','{3,5,6}'    ::integer[])

/*–ü—Ä–µ–¥–ø–æ–ª–ª–æ–∂–∏–º, —á—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Ä–µ—à–∏–ª–æ, —á—Ç–æ –∫–∞–∂–¥—ã–π
 * –ø–∏–ª–æ—Ç –¥–æ–ª–ª–∂–µ–Ω –ª–µ—Ç–∞—Ç—å 4 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é, –∑–Ω–∞—á–∏—Ç –Ω–∞–º –ø—Ä–∏–¥–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å
 * –ø–∏–ª–æ—Ç–∞–º –Ω–µ–¥–æ—Å—Ç–∞–≤—é—â–∏–µ –¥–Ω–∏ –ø–æ–ª–µ—Ç–∞ –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
 */

/*–ü–∞–≤–ª—É –¥–æ–±–∞–≤–∏–º –æ–¥–∏–Ω –¥–µ–Ω—å –≤ –∫–æ–Ω–µ—Ü —Å–ø–∏—Å–∫–∞*/

UPDATE pilots
SET schedule = schedule || 7
WHERE pilot_name = 'Boris'

/*–ü–∞–≤–ª—É –¥–æ–±–∞–≤–∏–ª –æ–¥–∏–Ω –¥–µ–Ω—å –≤ –∫–æ–Ω–µ—Ü —Å–ø–∏—Å–∫–∞*/

UPDATE pilots 
SET schedule = array_append(schedule, 6)
WHERE pilot_name = 'Pavel'

/*–ü–∞–≤–ª—É –¥–æ–±–∞–≤–∏–ª –æ–¥–∏–Ω –¥–µ–Ω—å –≤ –Ω–∞—á–∞–ª–æ —Å–ø–∏—Å–∫–∞*/

UPDATE pilots 
SET schedule = array_prepend(1, schedule)
WHERE pilot_name = 'Pavel'

/*–£ –ø–∏–ª–æ—Ç–∞ –ò–≤–∞–Ω –∏–º–µ–µ—Ç—Å—è –æ–¥–∏–Ω –ª–∏—à–Ω–∏–π –¥–µ–Ω—å –≤ –≥—Ä–∞—Ñ–∏–∫–µ, —É–¥–∞–ª–∏–º –æ–¥–∏–Ω –¥–µ–Ω—å
 * –∏–∑ –≥—Ä–∞—Ñ–∏–∫–∞*/

UPDATE pilots 
SET schedule = array_remove(schedule,5) ---–∑–Ω–∞—á–µ–Ω–∏–µ —ç–¥–µ–º–µ–Ω—Ç–∞ –º–∞—Å—Å–∏–≤–∞
WHERE pilot_name = 'Ivan'

/*–£ –ø–∏–ª–æ—Ç–∞ –ø–æ –∏–º–µ–Ω–∏ –ü–µ—Ç—Ä –∏–∑–º–µ–Ω–∏–º –¥–Ω–∏ –ø–æ–ª–µ—Ç–æ–≤ –Ω–µ –∏–∑–º–µ–Ω—è—è
 * –∏—Ö –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
 *–ö —ç–ª–µ–º–µ–Ω—Ç–∞–º –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –º–∞—Å—Å–∏–≤–∞ –º–æ–∂–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ 
 *set, –∫–∞–∫ –±—É–¥-—Ç–æ —ç—Ç–æ —Ä–∞–∑–Ω—ã–µ —Å—Ç–æ–ª–±—Ü—ã
 */

UPDATE pilots
SET schedule[1] = 2, schedule[2] = 3
WHERE pilot_name = 'Petr'

/*–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –∏—Å–ø–æ–ª—å–∑—É—è —Å—Ä–µ–∑ –º–∞—Å—Å–∏–≤–∞ slice*/

UPDATE pilots
SET schedule[1:2] = ARRAY[2,3] ---1 –∏ 2 —ç—Ç–æ –∏–Ω–¥–µ–∫—Å—ã –ø–µ—Ä–≤–æ–≥–æ –∏ –ø–æ—Å–ª–ª–µ–¥–Ω–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –º–∞—Å—Å–∏–≤–∞
WHERE pilot_name = 'Petr'

/*–û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å –∫ –≤—ã–±–æ—Ä–∫–∞–º –∏–∑ —Ç–∞–±–ª–∏—Ü*/

--—Å–ø–∏—Å–æ–∫ –ø–∏–ª–æ—Ç–æ–≤ –ª–µ—Ç–∞—é—â–∏—Ö –ø–æ —Å—Ä–µ–¥–∞–º
SELECT *
FROM pilots
WHERE array_position(schedule, 3) IS NOT NULL
---–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω–¥–µ–∫—Å –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–∂–¥–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –∑–Ω–∞—á–Ω–∏–µ–º –≤ –º–∞—Å—Å–∏–≤
---–µ—Å–ª–∏ —Ç–∞–∫–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –Ω–µ—Ç, —Ç–æ –æ–Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç–∏—Ç null

/*–í—ã–±–µ—Ä–µ–º –ø–∏–ª–æ—Ç–æ–≤ –ª–µ—Ç–∞—é—â–∏—Ö –ø–æ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞–º –∏ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å—è–º*/
SELECT * 
FROM pilots
WHERE schedule @> '{1,7}'::integer[];---–≤ –ª–µ–≤–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ —Å–æ–¥–µ—Ä–∂–∞—Ç—Å—è –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –ø—Ä–∞–≤–æ–≥–æ –º–∞—Å—Å–∏–≤–∞

/*–í—ã–±–µ—Ä–µ–º –ø–∏–ª–æ—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ª–µ—Ç–∞—é—Ç –ø–æ –≤—Ç–æ—Ä–Ω–∏–∫–∞–º –∏/–∏–ª–∏ –ø–æ –ø—è—Ç–Ω–∏—Ü–∞–º*/

SELECT * 
FROM pilots
WHERE schedule && ARRAY[2,5] ---–ø—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã —É –º–∞—Å—Å–∏–≤–∞


/*–í—ã–±–µ—Ä–µ–º –ø–∏–ª–æ—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ª–µ—Ç–∞—é—Ç –ø–æ –≤—Ç–æ—Ä–Ω–∏–∫–∞–º –∏/–∏–ª–∏ –ø–æ –ø—è—Ç–Ω–∏—Ü–∞–º*/
SELECT * 
FROM pilots
WHERE NOT (schedule && ARRAY[2,5]) ---–ø—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã —É –º–∞—Å—Å–∏–≤–∞

/*–¢–∏–ø—ã json –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ —Å—Ç–æ–ª–±—Ü–∞—Ö –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
 * —Ç–∞–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ json –∏ jsonb
 * —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ—å–∑–æ–≤–∞—Ç—å jsonb –µ—Å–ª–∏ –Ω–µ—Ç –æ—Å–æ–±—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
 * –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é json
 */

CREATE TABLE pilot_hobbies
(
pilot_name text,
hobbies jsonb
);


INSERT INTO pilot_hobbies
VALUES ('Ivan', '{"sports":["—Ñ—É—Ç–±–æ–ª","–ø–ª–∞–≤–∞–Ω–∏–µ"],
"home_lib": true,"trips":3}'::jsonb),

('Petr', '{"sports":["—Ç–µ–Ω–Ω–∏—Å","–ø–ª–∞–≤–∞–Ω–∏–µ"],
"home_lib": true,"trips":2}'::jsonb),

('Pavel', '{"sports":["–ø–ª–∞–≤–∞–Ω–∏–µ"],
"home_lib": false,"trips":4}'::jsonb),

('Boris', '{"sports":["–ø–ª–∞–≤–∞–Ω–∏–µ","—Ñ—É—Ç–±–æ–ª","—Ç–µ–Ω–Ω–∏—Å"],
"home_lib": true,"trips":0}'::jsonb)

/*–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –Ω–∞–º –Ω—É–∂–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Ñ—É—Ç–±–æ–ª—å–Ω—É—é –∫–æ–º–∞–Ω–¥–∂ –Ω–∞—à–µ–π
 * –∞–≤–∞–∫–æ–º–ø–∞–Ω–∏–∏ –¥–ª—è —É—á–∞—Å—Ç–∏—è –≤ —Ç—É—Ä–Ω–∏—Ä–µ. –ú—ã –º–æ–∂–µ–º –≤—ã–±—Ä–∞—Ç—å –≤—Å–µ—Ö —Ñ—É—Ç–±–æ–ª–∏—Å—Ç–æ–≤
 * —Ç–∞–∫–∏–º —Å–ø–æ—Å–æ–±–æ–º
 * SELECT * - –≤—ã–±–∏—Ä–∞–µ—Ç –≤—Å–µ —Å—Ç–æ–ª–±—Ü—ã
 * FROM pilot_hobbies - –∏–∑ —Ç–∞–±–ª–∏—Ü—ã pilot_hobbies
 * hobbies -> 'sports' - –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∫–ª—é—á–∞ 'sports' –∏–∑ JSON-–ø–æ–ª—è hobbies
 * @> '["—Ñ—É—Ç–±–æ–ª"]'::jsonb - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–∏ –∏–∑–≤–ª–µ—á–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤ ["—Ñ—É—Ç–±–æ–ª"]
 * */
SELECT *
FROM pilot_hobbies
WHERE hobbies ->'sports' @> '["—Ñ—É—Ç–±–æ–ª"]'::jsonb
---–æ–ø–µ—Ä–∞—Ü–∏—è -> —Å–ª—É–∂–∏—Ç –¥–ª—è –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –∫–ª—é—á—É json-–æ–±—ä–µ–∫—Ç–∞

/*–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ –∫—é—á sports
 * SELECT * - –≤—ã–±–∏—Ä–∞–µ—Ç –≤—Å–µ —Å—Ç–æ–ª–±—Ü—ã –∏–∑ —Ç–∞–±–ª–∏—Ü—ã
FROM pilot_hobbies - –∏–∑ —Ç–∞–±–ª–∏—Ü—ã —Å –∏–º–µ–Ω–µ–º pilot_hobbies
WHERE hobbies ? 'sports' - —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —Å—Ç—Ä–æ–∫–∏, –≥–¥–µ JSON-–ø–æ–ª–µ hobbies 
—Å–æ–¥–µ—Ä–∂–∏—Ç –∫–ª—é—á 'sports'
*/
SELECT *
FROM pilot_hobbies
WHERE hobbies ? 'sports' 

/*–û–±–Ω–æ–≤–µ–Ω–∏–µ–≤ json-–æ–±—ä–µ–∫—Ç–æ–≤ –≤ —Å—Ç—Ä–æ–∫–∞—Ö —Ç–∞–±–ª–∏—Ü—ã
 * –ù–∞–ø—Ä–∏–º–µ—Ä –ø–∏–ª–æ—Ç –ë–æ—Ä–∏—Å –∑–∞—Ö–æ—Ç–µ–ª –∑–∞–Ω–∏–º–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ —Ö–æ–∫–∫–µ–µ–º
 * 
 * –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–∞–∂–¥–∞—è —á–∞—Å—Ç—å:
 * UPDATE pilot_hobbies - –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ç–∞–±–ª–∏—Ü–µ pilot_hobbies
 * WHERE pilot_name = 'Boris' - —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–∏–ª–æ—Ç–∞ —Å –∏–º–µ–Ω–µ–º Boris
 * hobbies = hobbies || '{"sports":["—Ö–æ–∫–∫–µ–π"]}' - –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç (merge) —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π 
 * JSON —Å –Ω–æ–≤—ã–º JSON
 * –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä || (JSON merge):
 * –û–ø–µ—Ä–∞—Ç–æ—Ä || –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –¥–≤–∞ JSON-–¥–æ–∫—É–º–µ–Ω—Ç–∞:
 * –ï—Å–ª–∏ –∫–ª—é—á —Å—É—â–µ—Å—Ç–≤—É–µ—Ç - –∑–∞–º–µ–Ω—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ
 * –ï—Å–ª–∏ –∫–ª—é—á–∞ –Ω–µ—Ç - –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–π –∫–ª—é—á
 */

UPDATE pilot_hobbies
SET hobbies = hobbies || '{"sports":["—Ö–æ–∫–∫–µ–π"]}'
WHERE pilot_name = 'Boris'

/*–ï—Å–ª–∏ –ë–æ—Ä–∏—Å —â–∞–∑–æ—Ä—á–µ—Ç –≤–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–Ω—è—Ç–∏—è —Ñ—É—Ç–±–æ–ª–æ–º —Å –ø–æ–º–æ—â—å—é
 * —Ñ—É–Ω–∫—Ü–∏–∏ jsonb_set –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å —Å–≤–µ–¥–µ–Ω–∏—è –æ –Ω–µ–º –≤ —Ç–∞–±–ª–∏—Ü–µ
 * 
 * –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–∞–∂–¥–∞—è —á–∞—Å—Ç—å:
 * jsonb_set(hobbies, '{sports, 1}', '"—Ñ—É—Ç–±–æ–ª"') - —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è:
 * –ë–µ—Ä–µ—Ç JSON-–ø–æ–ª–µ hobbies
 * –ù–∞—Ö–æ–¥–∏—Ç –ø—É—Ç—å {sports, 1} (–º–∞—Å—Å–∏–≤ sports, –∏–Ω–¥–µ–∫—Å 1)
 * –ó–∞–º–µ–Ω—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–µ "—Ñ—É—Ç–±–æ–ª"
 * –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –∏–Ω–¥–µ–∫—Å—ã –≤ JSON –º–∞—Å—Å–∏–≤–∞—Ö:
 * –í PostgreSQL –∏–Ω–¥–µ–∫—Å—ã –º–∞—Å—Å–∏–≤–æ–≤ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å 0:
 * {sports, 0} - –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç
 * {sports, 1} - –≤—Ç–æ—Ä–æ–π —ç–ª–µ–º–µ–Ω—Ç
 * {sports, 2} - —Ç—Ä–µ—Ç–∏–π —ç–ª–µ–º–µ–Ω—Ç
 * –∏ —Ç.–¥.
 */

UPDATE pilot_hobbies
SET hobbies = jsonb_set(hobbies, '{sports, 1}', '"—Ñ—É—Ç–±–æ–ª"')
WHERE pilot_name = 'Boris';

/*–¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –ø–µ—Ä–≤—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç–æ–º –≤—ã–≤–æ–¥–∞ –¥–∞—Ç—ã, –∞ 
 * –≤—Ç–æ—Ä–æ–π —Ä–µ–≥—É–∏—Ä—É–µ—Ç –ø–æ—Ä—è–¥–æ–∫ —Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö —á–∞—Å—Ç–µ–π –¥–∞—Ç—ã*/

SELECT to_char(current_timestamp, 'mi:ss')
SELECT to_char(current_timestamp, 'yyyy-mm-dd')
SHOW datestyle

/*–ù–∞ –º–æ–º–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ –¥–æ—Å—Ç–∏–≥ –≤–æ–∑–∞—Ä–∞—Å—Ç–∞ 40 –ª–µ—Ç*/

CREATE TABLE birthdays(
person text NOT  NULL,
birthday date NOT NULL 
)

INSERT INTO birthdays VALUES 
('Ken Thompson', '1966-03-23'),
('Ben Johnson', '1971-03-19'),
('Andy Gibson', '1987-08-12');

SELECT *, birthday + '40 years'::interval
FROM birthdays
WHERE birthday + '40 years'::INTERVAL < current_timestamp

/*–í—ã–±–µ—Ä–µ–º –≤—Å–µ—Ö –ª—é–¥–µ–π —Ä–æ–¥–∏–≤—à–∏—Ö—Å—è –≤ –º–∞—Ä—Ç–µ*/
SELECT
	*
FROM
	birthdays
WHERE
	EXTRACT('mon' FROM birthday) = 3;

/*–û—Å–Ω–æ–≤—ã —è–∑—ã–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
 * –í—Å—Ç–∞–≤–∫–∞ —Å—Ç—Ä–æ–∫ –≤ —Ç–∞–±–ª–∏—Ü—ã, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –Ω–∏–º, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ,
 * —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫ –∏–∑ —Ç–∞–±–ª–∏—Ü, —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö*/


/*üéØ –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (DEFAULT)
–°–∏–Ω—Ç–∞–∫—Å–∏—Å:*/
CREATE TABLE table_name (
    column_name data_type DEFAULT default_value
);

-- –ü—Ä–æ—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    is_active BOOLEAN DEFAULT true,
    status VARCHAR(20) DEFAULT 'pending',
    login_count INTEGER DEFAULT 0
);

-- –í—ã—Ä–∞–∂–µ–Ω–∏—è –∫–∞–∫ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    order_date DATE DEFAULT CURRENT_DATE,
    order_number VARCHAR(20) DEFAULT 'ORD-' || to_char(CURRENT_DATE, 'YYYYMMDD') || '-' || lpad(nextval('orders_id_seq'::regclass)::text, 6, '0'),
    total_amount DECIMAL(10,2) DEFAULT 0.00
);


/*–î–æ–±–∞–≤–ª–µ–Ω–∏–µ DEFAULT –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ç–∞–±–ª–∏—Ü–µ:*/
ALTER TABLE users 
ALTER COLUMN updated_at SET DEFAULT CURRENT_TIMESTAMP;

ALTER TABLE products 
ALTER COLUMN price SET DEFAULT 0.00;

